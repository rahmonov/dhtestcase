import pytest
from django.contrib.gis.geos import Point, Polygon
from rest_framework.test import APIClient

from restaurant.models import Restaurant


@pytest.fixture
def api_client():
    return APIClient()


@pytest.fixture
def overlapping_restaurants():
    Restaurant.objects.create(name='KFC', location=Point(52.5247258, 13.39303289999998), delivery_area=Polygon(
        [[13.39303289999998, 52.5337089528412], [13.395913937206183, 52.53353630910886],
         [13.39868419197304, 52.533025016495436], [13.401237149192186, 52.53219473502801],
         [13.403474662897601, 52.53107738892567], [13.405310733632021, 52.529715937184704],
         [13.406674815342607, 52.528162719640235], [13.407514524422746, 52.5264774425287],
         [13.40779764710031, 52.52472488142933], [13.407513368897478, 52.522972390251994],
         [13.406672680210292, 52.521287312261535], [13.405307943947166, 52.519734392722825],
         [13.40347164336441, 52.51837329250363], [13.401234359507212, 52.517256297923076],
         [13.398682056840562, 52.516426314461434], [13.3959127816808, 52.51591522096912],
         [13.39303289999998, 52.51574264715881], [13.390153018319161, 52.51591522096912],
         [13.387383743159399, 52.516426314461434], [13.384831440492748, 52.517256297923076],
         [13.38259415663555, 52.51837329250363], [13.380757856052794, 52.519734392722825],
         [13.37939311978967, 52.521287312261535], [13.378552431102484, 52.522972390251994],
         [13.37826815289965, 52.52472488142933], [13.378551275577214, 52.5264774425287],
         [13.379390984657354, 52.528162719640235], [13.38075506636794, 52.529715937184704],
         [13.382591137102361, 52.53107738892567], [13.384828650807776, 52.53219473502801],
         [13.387381608026923, 52.533025016495436], [13.390151862793777, 52.53353630910886],
         [13.39303289999998, 52.5337089528412]]))
    Restaurant.objects.create(name='Dodo Pizza', location=Point(52.5104255, 13.381063600000061), delivery_area=Polygon(
        [[13.381063600000061, 52.519408652841186], [13.383943699354093, 52.51923600912693],
         [13.386713052365325, 52.51872471656497], [13.389265178626324, 52.517894435174554],
         [13.391501964135697, 52.51677708916306], [13.393337437431331, 52.51541563751293],
         [13.394701075408562, 52.51386242004543], [13.395540511481798, 52.512177142985315],
         [13.395823542323432, 52.510424581903976], [13.39553935692947, 52.50867209070853],
         [13.394698942074006, 52.50698701266661], [13.393334650095358, 52.505434093050894],
         [13.39149894714492, 52.50407299274088], [13.38926239129024, 52.50295599806952],
         [13.386710919030604, 52.502126014530894], [13.38394254480165, 52.50161492098716],
         [13.381063600000061, 52.50144234715879], [13.378184655198474, 52.50161492098716],
         [13.375416280969517, 52.502126014530894], [13.372864808709885, 52.50295599806952],
         [13.370628252855202, 52.50407299274088], [13.368792549904764, 52.505434093050894],
         [13.367428257926115, 52.50698701266661], [13.36658784307065, 52.50867209070853],
         [13.366303657676688, 52.510424581903976], [13.366586688518323, 52.512177142985315],
         [13.367426124591558, 52.51386242004543], [13.368789762568793, 52.51541563751293],
         [13.370625235864425, 52.51677708916306], [13.372862021373797, 52.517894435174554],
         [13.3754141476348, 52.51872471656497], [13.378183500646031, 52.51923600912693],
         [13.381063600000061, 52.519408652841186]]))
    Restaurant.objects.create(name='Johns', location=Point(52.53807949999999, 13.39552260000005), delivery_area=Polygon(
        [[13.39552260000005, 52.5470626528412], [13.39840451369164, 52.54689000909196],
         [13.401175611209236, 52.54637871643045], [13.403729345014138, 52.545548434891074],
         [13.40596753926724, 52.544431088703845], [13.40780416834794, 52.54306963687802],
         [13.4091686647568, 52.541516419261605], [13.410008628979952, 52.53983114210202],
         [13.41029183748418, 52.53807858098581], [13.410007472545159, 52.536326089825394],
         [13.409166527943901, 52.534641011883025], [13.407801376467296, 52.533088092416264],
         [13.405964517357345, 52.53172699228194], [13.403726553133378, 52.53060999778622],
         [13.401173474396177, 52.52978001439651], [13.398403357256731, 52.52926892095224],
         [13.39552260000005, 52.529096347158806], [13.392641842743368, 52.52926892095224],
         [13.389871725603921, 52.52978001439651], [13.38731864686672, 52.53060999778622],
         [13.385080682642753, 52.53172699228194], [13.383243823532803, 52.533088092416264],
         [13.381878672056196, 52.534641011883025], [13.38103772745494, 52.536326089825394],
         [13.380753362515918, 52.53807858098581], [13.381036571020147, 52.53983114210202],
         [13.381876535243299, 52.541516419261605], [13.383241031652158, 52.54306963687802],
         [13.38507766073286, 52.544431088703845], [13.38731585498596, 52.545548434891074],
         [13.389869588790862, 52.54637871643045], [13.392640686308459, 52.54689000909196],
         [13.39552260000005, 52.5470626528412]]))
    Restaurant.objects.create(name='BBQ', location=Point(52.494121539777716, 13.37559700012207), delivery_area=Polygon(
        [[13.37616360000006, 52.51450865284112], [13.37904369935409, 52.51433600912686],
         [13.38181305236532, 52.5138247165649], [13.38436517862632, 52.51299443517449],
         [13.3866019641357, 52.51187708916299], [13.38843743743133, 52.51051563751287],
         [13.38980107540856, 52.50896242004536], [13.3906405114818, 52.50727714298525],
         [13.39092354232343, 52.50552458190391], [13.39063935692947, 52.50377209070847],
         [13.38979894207401, 52.50208701266655], [13.38843465009536, 52.50053409305083],
         [13.38659894714492, 52.49917299274082], [13.38436239129024, 52.49805599806945],
         [13.3818109190306, 52.49722601453083], [13.37904254480165, 52.4967149209871],
         [13.37616360000006, 52.49654234715873], [13.37328465519847, 52.4967149209871],
         [13.37051628096952, 52.49722601453083], [13.36796480870988, 52.49805599806945],
         [13.3657282528552, 52.49917299274082], [13.36389254990476, 52.50053409305083],
         [13.36252825792611, 52.50208701266655], [13.36168784307065, 52.50377209070847],
         [13.36140365767669, 52.50552458190391], [13.36168668851832, 52.50727714298525],
         [13.36252612459156, 52.50896242004536], [13.36388976256879, 52.51051563751287],
         [13.36572523586442, 52.51187708916299], [13.3679620213738, 52.51299443517449],
         [13.3705141476348, 52.5138247165649], [13.37328350064603, 52.51433600912686],
         [13.37616360000006, 52.51450865284112]]))
